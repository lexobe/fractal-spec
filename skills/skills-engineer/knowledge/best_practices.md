# Agent Skills 最佳实践 (SOTA)

**来源**: Anthropic, OpenAI, Gemini 官方文档及社区研究 (2025-2026)。
**用途**: Skills Engineer 在生成新 Skill 时的强制参考标准。

## 1. 核心架构（渐进式披露 Progressive Disclosure）
*   **精简主文件**: `SKILL.md` **必须** 少于 500 行。
    *   *原因*: 上下文效率。只加载触发所需的最少信息。
*   **卸载细节**:
    *   将刚性流程放入 `scripts/`。
    *   将长参考文档放入 `knowledge/`。
    *   将复杂子推理放入 `prompts/`。
*   **原子化设计**: 一个 Skill = 一个能力。不要将"编码"和"写作"捆绑在一起。

## 2. 命名规范（至关重要）
*   **动名词命名**: 使用 `doing-something` 格式（如 `generating-reports`, `analyzing-code`），**不要**用 `report-generator`。
    *   *原因*: 动名词暗示 Agent *执行*的动作，而非一个被动的工具。
    *   *例外*: 已命名并投入使用的 Skill 无需追溯更名（更名成本 > 收益）。
*   **描述字段**: YAML 中的 `description` 是**路由器**。
    *   必须足够详细以正确触发。
    *   示例: "当用户需要对代码库进行安全漏洞审计时使用此技能。"
    *   上限: 1024 字符。

## 3. 指令技巧
*   **祈使语气**: "执行 X"、"检查 Y"。禁止"请"、"可以吗"等礼貌用语。
*   **深度思考**: 对于复杂推理，指示模型使用 `<thinking>` 或 `<ultrathink>` 块。
*   **声明约束**: 明确写出 Agent **不可以做什么**。

## 4. 安全性（ToxicSkills 防御）
*   **输入校验**: `scripts/` 中的所有脚本必须验证参数。
*   **最小权限**: `allowed-tools`（如使用）应尽可能精简。
*   **禁止硬编码**: 绝不在 `SKILL.md` 或脚本中放置 API Key、密码。使用环境变量。

## 5. 标准目录结构
~~~
skill-name/
├── SKILL.md          (入口文件)
├── prompts/          (LLM 子任务)
├── scripts/          (确定性代码)
└── knowledge/        (静态文档)
~~~

## 6. 反模式（何时**不应**创建 Skill） ⭐ 新增
*   **需求可用一条 `claude.md` 规则解决时**：不需要完整 Skill。直接写规则。
*   **需求过于宽泛时**（如"帮我做 AI"）：先澄清，不要强行生成。
*   **一次性任务**：如果这个能力不会被复用，Skill 的开发成本不值得。

## 7. 跨模型测试 ⭐ 新增
*   生成的 Skill 应在不同能力等级的模型上验证：
    *   **轻量模型**（如 Haiku / GPT-3.5）：检查指令是否足够清晰，低能力模型也能理解。
    *   **标准模型**（如 Sonnet / GPT-4o）：主要执行环境。
    *   **旗舰模型**（如 Opus / GPT-4）：确认没有过度约束导致高能模型表现受限。
